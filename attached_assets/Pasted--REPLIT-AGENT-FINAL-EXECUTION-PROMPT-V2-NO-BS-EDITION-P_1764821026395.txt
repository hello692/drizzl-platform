âœ… REPLIT AGENT â€“ FINAL EXECUTION PROMPT (V2 â€“ NO BS EDITION)

Paste exactly this into Replit Agent on a fresh run:

You are the principal systems engineer responsible for taking this project from a broken demo UI into a real, production-grade SaaS platform.

Your only objective:

Make Drizzl a fully functional multi-tenant platform where EVERY screen, EVERY number, and EVERY workflow is either REAL, CONNECTED TO SUPABASE, or CLEARLY LABELED â€œCOMING SOONâ€.

Zero fake numbers.
Zero decorative-only dashboards.
Zero silent demo mode.

âœ… PHASE 1 â€” SYSTEM TRUTH RESET (MANDATORY)

Scan the entire repo.

Identify and DELETE all:

Hardcoded metrics

Static demo cards

Mock JSON arrays used for:

Revenue

Orders

Inventory

Factory stats

Analytics

Replace them with one of:

âœ… Real Supabase queries

âœ… Explicit UI label: â€œComing Soonâ€ (NOT silent fake data)

Create lib/systemMode.ts:

export const SYSTEM_MODE = process.env.NEXT_PUBLIC_SYSTEM_MODE || "production";


If any feature still relies on mock logic:

It MUST show a visible badge:
â€œDEMO DATA â€“ API NOT CONNECTEDâ€

âœ… PHASE 2 â€” SINGLE SOURCE OF TRUTH DATABASE

Your entire system must run from these tables only:

USERS & ROLES

auth.users

profiles (id, email, role, account_type, b2b_status)

COMMERCE

products

orders

order_items

wholesale_applications

OPERATIONS

inventory_ingredients

inventory_packaging

inventory_finished_goods

production_batches

ANALYTICS

Derived ONLY from orders + order_items

If any data is coming from anywhere else â†’ remove it.

âœ… PHASE 3 â€” AUTH & ROLE GATES (NO MORE LOCKOUTS)

Fix permanently:

/admin/setup

If admin already exists â†’ redirect to /admin

If not:

Create auth user

Immediately upsert profiles.role = 'admin'

Auto login â†’ /admin

/admin/auth

Login â†’ verify profiles.role === 'admin'

If not admin â†’ Access Denied

/auth

2 buttons:

Customer Login

Retail Partner Login

Customer â†’ dashboard

Partner â†’ /retail/apply

No broken loops. No missing routes. No invisible logins.

âœ… PHASE 4 â€” CORE BUSINESS PIPELINE (MUST BE REAL)
PRODUCTS

CRUD â†’ Supabase products

No fake catalog

Admin add/edit visible instantly on store

STORE + CHECKOUT

Public product list

Cart

Test checkout allowed if Stripe not set

On success:

Insert orders

Insert order_items

Decrement inventory

ORDERS

/admin/orders pulls from orders

Customer sees only their orders

B2B sees only their wholesale orders

B2B PARTNERS

Application saves to wholesale_applications

Admin approves â†’ updates:

profiles.role = 'b2b'

b2b_status = 'approved'

Partner unlocks wholesale pricing

âœ… PHASE 5 â€” DASHBOARDS MUST MATCH REALITY
COMMAND CENTER CARDS

These numbers must be LIVE:

Total Orders â†’ orders.count

Revenue â†’ sum(orders.total)

D2C Orders â†’ orders where type='d2c'

B2B Orders â†’ orders where type='b2b'

INVENTORY

Only from inventory tables

Expiry warning computed from dates

Stock decreases when orders happen

FACTORY

Batches from production_batches

Progress derived from rows

If not wired â†’ show â€œFactory Automation Coming Soonâ€

BANKING

Pull revenue ONLY from orders

Any Mercury/Stripe numbers:

Must show: â€œExternal banking API not connectedâ€

No fake balances

ANALYTICS

Charts from orders & order_items only

If no data â†’ show clean â€œNo data yetâ€ states

âœ… PHASE 6 â€” NO DEAD UI

You must click:

Every nav button

Every top tab

Every action button

If it does nothing:

Either wire it

Or replace it with:
â€œThis module is under active developmentâ€

No silent failures allowed.

âœ… PHASE 7 â€” FINAL QA AUTOPILOT

Run this checklist:

âœ… Admin can:

Login

Add product

See orders

Approve B2B partner

See analytics update from real orders

âœ… Customer can:

Signup

Checkout

See order in dashboard

âœ… B2B Partner can:

Apply

Get approved

Place wholesale order

âœ… Nothing:

Throws console errors

Loops logins

Shows fake revenue

âœ… PHASE 8 â€” FINAL DELIVERY FORMAT (MANDATORY)

When finished, your response MUST include:

âœ… What is now fully real & live

ğŸŸ¡ What is explicitly marked â€œComing Soonâ€

ğŸ”‘ Which env keys are optional vs required

ğŸ”— Exact URLs for:

Storefront

/auth

/admin/auth

/admin

/retail/apply

You are not allowed to say â€œfinishedâ€ unless all 4 are delivered.

ğŸ§  WHY THIS VERSION IS BETTER

This version:

âœ… Removes ambiguity
âœ… Forces real DB usage
âœ… Prevents the AI from hiding behind demo mode
âœ… Converts vanity dashboards into actual business infrastructure
âœ… Stops infinite half-building loops
âœ… Is optimized for launch pressure